/**
 * Camera管理类
 **/
var spawn = require('child_process').spawn;
var exec = require('child_process').exec;

var connectcam = function(url) {
    try {
      var command = 'vlc -I dummy -vvv  \"' + url + '\"  --sout=\"#transcode{vcodec=theo,vb=800,acodec=vorb,ab=128,channels=2,samplerate=44100}:http{mux=ogg,dst=:7788/cam}\" --sout-all --sout-keep';
      exec(command, function(error, stdout, stderr){
          if(error) {
              console.error('error: ' + error);
              return;
          }
          console.log('stdout: ' + stdout);
          console.log('stderr: ' + typeof stderr);
      });
    } catch (err) { 
      console.log(err);
    }
};

exports.connectcam = connectcam;

